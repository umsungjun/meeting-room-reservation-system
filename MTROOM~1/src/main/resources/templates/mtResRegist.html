<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>íšŒì˜ì‹¤ ì˜ˆì•½ ë“±ë¡</title>

<link href="/css/mtResRegist.css" rel="stylesheet" type="text/css" />
<link href="/css/button.css" rel="stylesheet" type="text/css" />
<link href="/css/jqueryui.css" rel="stylesheet" type="text/css" />

<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.9.2/i18n/jquery.ui.datepicker-ko.min.js"></script>
<script type="text/javaScript" language="javascript">

function initCalendar(){
  $("#reserve_Day").datepicker(
        {dateFormat:'yy-mm-dd'
         , showOn: 'button'
         , buttonImage : '/resources/images/cmm/icon/bu_icon_carlendar.gif'
         , buttonImageOnly: true        
         , showMonthAfterYear: true
         , showOtherMonths: true
         , selectOtherMonths: true
         , changeMonth: true // ì›”ì„ íƒ select box í‘œì‹œ (ê¸°ë³¸ì€ false)
         , changeYear: true  // ë…„ì„ íƒ selectbox í‘œì‹œ (ê¸°ë³¸ì€ false)
         , showButtonPanel: true // í•˜ë‹¨ today, done  ë²„íŠ¼ê¸°ëŠ¥ ì¶”ê°€ í‘œì‹œ (ê¸°ë³¸ì€ false)
  });
  $("#resveView").change(function(){
	  $("reserve_Day").val($(this).val().replace(/-/gi,"/"));
  })
}

function fncMrReserve() {


 mtgPlaceResve.action = "insertReserve";

 if(mtgPlaceResve.dupCeck.value =="true" ) {
     if(confirm("ì—ì•½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
     mtgPlaceResve.submit();
     }
     else{
    return false;
     }
 }
 else if(mtgPlaceResve.dupCeck.value == false) {alert("ì˜ˆì•½ ì¤‘ë³µí™•ì¸ì„ ë¨¼ì € í•´ì£¼ì‹­ì‡¼ ^^");}   
 else { alert("íšŒì˜ì‹¤ ì˜ˆì•½ ì¤‘ë³µí™•ì¸ì„ í•˜ì‹  í›„ íšŒì˜ì‹¤ ì˜ˆì•½ì„ í•´ì£¼ì„¸ìš”.");}
}
// íšŒì˜ì‹¤ ì¤‘ë³µì—¬ë¶€ í™•ì¸  ajax 
function resDupCheck(){
	
	console.log("ë²„íŠ¼ ëˆŒë¦¼");
	var mrNo =   mtgPlaceResve.mrNo.value;
	var beginTm =  mtgPlaceResve.reserve_Start.value;
	var endTm   =  mtgPlaceResve.reserve_End.value;
	var res_Day =  mtgPlaceResve.reserve_Day.value
	
	if((endTm-beginTm) < 0){
	  alert("ì˜ˆì•½ì‹œì‘ ì‹œê°„ì´ ì˜ˆì•½ì¢…ë£Œ ì‹œê°„ë³´ë‹¤ ë¹¨ë¼ì•¼ í•©ë‹ˆë‹¤.");
	  return false;
	}
	
	var sTempValue = "reserve_Day="+ res_Day  + "&reserve_Start="+beginTm + "&reserve_End="+endTm + "&mrNo=" + mrNo
	
	var access = $("#dupMsg");
	
	$.ajax({
		
	   url:"/resDupCheck?" + sTempValue,
	   type: 'get',
	   dataType: 'json',
	   
	   success:function(result){
		   alert("ì¤‘ë³µì²´í¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
	    if (result.dup=="true"){
	      access.html("<font color='green' size='2px;'><i class='fa fa-check'>&nbsp;:ì˜ˆì•½ ê°€ëŠ¥í•œ ì‹œê°„ì…ë‹ˆë‹¤.</i></font>");
	      $("#dupCeck").val("true");
	    }
	    else{
	      access.html("<font color='red' size='2px;'><i class='fa fa-times'>&nbsp;:ì˜ˆì•½ ì‹œê°„ì´ ì¤‘ë³µë˜ì—ˆìŠµë‹ˆë‹¤.</i></font>");
	      $("#dupCeck").val("false");
	    }
	 }
});
}

</script>
</head>
<form th:object="${mrReserveVO}" name="mtgPlaceResve" method="post" >
<input type="hidden" name="cmd" value="insert" >
<input type="hidden" name="dupCeck" id="dupCeck">
<input type="hidden" name="mrNo" th:value ="${mtRoomVO.mrNo}">

<div class="wTableFrm">
<!-- íƒ€ì´í‹€ -->
<div class="mtRoomListTitle">
	<span class="resListTitle">ğŸ˜› íšŒì˜ì‹¤ ìˆ˜ì • ğŸ˜</span>
	<span class="subTitle">revise a meeting room</span>
</div>

<!-- ë“±ë¡í¼ -->
<table class="wTable">
<tr>
<th>ì œëª© <span class="pilsu">*</span></th>
<td class="left" colspan="3">
    <input name="title" type="text" maxlength="70" title="ì œëª©" required="required" />
</td>
</tr>
<tr>
<th>íšŒì˜ì‹¤ëª… <span class="pilsu">*</span></th><!-- íšŒì˜ì‹¤ëª… -->
<td class="left" colspan="3" th:text="${mtRoomVO.mr_Name}">
    
</td>
</tr>
<tr>
<th>íšŒì˜ì‹¤ ìœ„ì¹˜ <span class="pilsu">*</span></th><!-- íšŒì˜ì‹¤ ìœ„ì¹˜ -->
<td class="left" colspan="3">
   <input name="location" th:value="${mtRoomVO.location}" cssStyle="width:509px" style="
    border: none;width: 30px;
" required="required"/> <br>
   <input name="building" th:value="${mtRoomVO.building}"  required="required" style="
    border: none;width: 100px;
"/> <br>
   <input name="roomNo" th:value="${mtRoomVO.roomNo}"  required="required" style="
    border: none;width: 20px;
"/> <br>
   
   
</td>
</tr>
<tr>
<th>ì˜ˆì•½ì ID  <span class="pilsu">*</span></th><!-- ì˜ˆì•½ì -->
<td class="left">
    <input name="first_Reg_ID" type="text" maxlength="20" th:value="asd"  /> 
</td>

<!--  <th>ì˜ˆì•½ì ì´ë¦„ </th>
<td class="left" th:text="${resName}">
	<input name="last_Reg_ID" type="text" maxlength="20" th:value="${resName}"  /> 
</td>
-->
</tr>

<tr> <div>
<th>ì˜ˆì•½ì‹œê°„  <span class="pilsu">*</span></th>
<td class="left" colspan="3">
    <input type="hidden" name="cal_url" id="cal_url" value="<c:url value='/sym/cal/EgovNormalCalPopup.do'/>" >
<input name="reserve_Day" id="reserve_Day" type="text" size="10" th:value="${mrReserveVO.reserve_Day}" title="ì˜ˆì•½ì¼ì" maxlength="10" style="width:78px" />

<select name="reserve_Start" title="ì˜ˆì•½ì‹œì‘ì‹œê°„">
<option value="800" th:selected="${mrReserveVO.reserve_Start == '800'}">08:00</option>
<option value="830" th:selected="${mrReserveVO.reserve_Start == '830'}">08:30</option>
<option value="900" th:selected="${mrReserveVO.reserve_Start == '900'}">09:00</option>
<option value="930" th:selected="${mrReserveVO.reserve_Start == '930'}">09:30</option>
<option value="1000" th:selected="${mrReserveVO.reserve_Start == '1000'}">10:00</option>
<option value="1030" th:selected="${mrReserveVO.reserve_Start == '1030'}">10:30</option>
<option value="1100" th:selected="${mrReserveVO.reserve_Start == '1100'}">11:00</option>
<option value="1130" th:selected="${mrReserveVO.reserve_Start == '1130'}">11:30</option>
<option value="1200" th:selected="${mrReserveVO.reserve_Start == '1200'}">12:00</option>
<option value="1230" th:selected="${mrReserveVO.reserve_Start == '1230'}">12:30</option>
<option value="1300" th:selected="${mrReserveVO.reserve_Start == '1300'}">13:00</option>
<option value="1330" th:selected="${mrReserveVO.reserve_Start == '1330'}">13:30</option>
<option value="1400" th:selected="${mrReserveVO.reserve_Start == '1400'}">14:00</option>
<option value="1430" th:selected="${mrReserveVO.reserve_Start == '1430'}">14:30</option>
<option value="1500" th:selected="${mrReserveVO.reserve_Start == '1500'}">15:00</option>
<option value="1530" th:selected="${mrReserveVO.reserve_Start == '1530'}">15:30</option>
<option value="1600" th:selected="${mrReserveVO.reserve_Start == '1600'}">16:00</option>
<option value="1630" th:selected="${mrReserveVO.reserve_Start == '1630'}">16:30</option>
<option value="1700" th:selected="${mrReserveVO.reserve_Start == '1700'}">17:00</option>
<option value="1730" th:selected="${mrReserveVO.reserve_Start == '1730'}">17:30</option>
<option value="1800" th:selected="${mrReserveVO.reserve_Start == '1800'}">18:00</option>
<option value="1830" th:selected="${mrReserveVO.reserve_Start == '1830'}">18:30</option>
<option value="1900" th:selected="${mrReserveVO.reserve_Start == '1900'}">19:00</option>
<option value="1930" th:selected="${mrReserveVO.reserve_Start == '1930'}">19:30</option>
<option value="2000" th:selected="${mrReserveVO.reserve_Start == '2000'}">20:00</option>
<option value="2030" th:selected="${mrReserveVO.reserve_Start == '2030'}">20:30</option>
<option value="2100" th:selected="${mrReserveVO.reserve_Start == '2100'}">21:00</option>


</select>
~
<select name="reserve_End" title="ì˜ˆì•½ì¢…ë£Œì‹œê°„"><!-- ì˜ˆì•½ì¢…ë£Œì‹œê°„ -->
<option value="800" th:selected="${mrReserveVO.reserve_Start == '800'}">08:00</option>
<option value="830" th:selected="${mrReserveVO.reserve_Start == '830'}">08:30</option>
<option value="900" th:selected="${mrReserveVO.reserve_Start == '900'}">09:00</option>
<option value="930" th:selected="${mrReserveVO.reserve_Start == '930'}">09:30</option>
<option value="1000" th:selected="${mrReserveVO.reserve_Start == '1000'}">10:00</option>
<option value="1030" th:selected="${mrReserveVO.reserve_Start == '1030'}">10:30</option>
<option value="1100" th:selected="${mrReserveVO.reserve_Start == '1100'}">11:00</option>
<option value="1130" th:selected="${mrReserveVO.reserve_Start == '1130'}">11:30</option>
<option value="1200" th:selected="${mrReserveVO.reserve_Start == '1200'}">12:00</option>
<option value="1230" th:selected="${mrReserveVO.reserve_Start == '1230'}">12:30</option>
<option value="1300" th:selected="${mrReserveVO.reserve_Start == '1300'}">13:00</option>
<option value="1330" th:selected="${mrReserveVO.reserve_Start == '1330'}">13:30</option>
<option value="1400" th:selected="${mrReserveVO.reserve_Start == '1400'}">14:00</option>
<option value="1430" th:selected="${mrReserveVO.reserve_Start == '1430'}">14:30</option>
<option value="1500" th:selected="${mrReserveVO.reserve_Start == '1500'}">15:00</option>
<option value="1530" th:selected="${mrReserveVO.reserve_Start == '1530'}">15:30</option>
<option value="1600" th:selected="${mrReserveVO.reserve_Start == '1600'}">16:00</option>
<option value="1630" th:selected="${mrReserveVO.reserve_Start == '1630'}">16:30</option>
<option value="1700" th:selected="${mrReserveVO.reserve_Start == '1700'}">17:00</option>
<option value="1730" th:selected="${mrReserveVO.reserve_Start == '1730'}">17:30</option>
<option value="1800" th:selected="${mrReserveVO.reserve_Start == '1800'}">18:00</option>
<option value="1830" th:selected="${mrReserveVO.reserve_Start == '1830'}">18:30</option>
<option value="1900" th:selected="${mrReserveVO.reserve_Start == '1900'}">19:00</option>
<option value="1930" th:selected="${mrReserveVO.reserve_Start == '1930'}">19:30</option>
<option value="2000" th:selected="${mrReserveVO.reserve_Start == '2000'}">20:00</option>
<option value="2030" th:selected="${mrReserveVO.reserve_Start == '2030'}">20:30</option>
<option value="2100" th:selected="${mrReserveVO.reserve_Start == '2100'}">21:00</option>
</select>

<input class="btn01" id="btn01" type="button" value="ì¤‘ë³µì²´í¬" th:onclick="resDupCheck(); return false;" title="ì¤‘ë³µì²´í¬"/> 
<span id="dupMsg"></span></div>
</td></tr>
<tr>
<th>ì°¸ì„ì¸ì›</th><!-- ì°¸ì„ì¸ì› -->
<td class="left" colspan="3">
    <input name="attendees" type="text"  maxlength="3" style="width:30px;" title="ì°¸ì„ì¸ì›" required="required" /> ëª…
</td></tr>
<tr>
<th>íšŒì˜ë‚´ìš©</th><!-- íšŒì˜ë‚´ìš© -->
<td class="left" colspan="3">
    <textarea name="contents" rows="4" cols="70" title="íšŒì˜ë‚´ìš©" required="required" ></textarea> 
</td>
</tr>

<!--  ì²¨ë¶€íŒŒì¼ í…Œì´ë¸” ë ˆì´ì•„ì›ƒ ì„¤ì • Start.. -->
<span th:if="${mtRoomVO.picture !='' }" ></span>
<tr>
<th height="23" class="required_text" scope="row">ì´ë¯¸ì§€ íŒŒì¼</th><!-- ì´ë¯¸ì§€ íŒŒì¼ëª©ë¡ -->
<td class="left" colspan="3">
   <img th:src="@{|/images/${mtRoomVO.picture}|}" width="500" height="450" alt="">
</td>
</tr>
</span>
</table>
<!-- í•˜ë‹¨ ë²„íŠ¼ -->
<div class="btn">
<input class="s_submit" type="submit" value='ì €ì¥' onclick="fncMrReserve(); return false;" />
<span class="btn_s"><a href="mtResList" >ëª©ë¡</a></span>
</div>

</div>
</form>
</body>
</html>

